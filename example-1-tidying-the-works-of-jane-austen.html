<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.3 Example 1: Tidying the works of Jane Austen | Text Mining with R Book Club</title>
  <meta name="description" content="This is the product of the R4DS Online Learning Community’s Text Mining with R Book Club." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="1.3 Example 1: Tidying the works of Jane Austen | Text Mining with R Book Club" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the product of the R4DS Online Learning Community’s Text Mining with R Book Club." />
  <meta name="github-repo" content="r4ds/bookclub-tidytext" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.3 Example 1: Tidying the works of Jane Austen | Text Mining with R Book Club" />
  
  <meta name="twitter:description" content="This is the product of the R4DS Online Learning Community’s Text Mining with R Book Club." />
  

<meta name="author" content="The R4DS Online Learning Community" />


<meta name="date" content="2021-11-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-unnest_tokens-function.html"/>
<link rel="next" href="example-2-the-gutenbergr-package.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Text Mining with R Book Club</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="book-club-meetings.html"><a href="book-club-meetings.html"><i class="fa fa-check"></i>Book club meetings</a></li>
<li class="chapter" data-level="" data-path="pace.html"><a href="pace.html"><i class="fa fa-check"></i>Pace</a></li>
<li class="chapter" data-level="" data-path="book-chapters.html"><a href="book-chapters.html"><i class="fa fa-check"></i>Book Chapters</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chapter-1.-the-tidy-text-format.html"><a href="chapter-1.-the-tidy-text-format.html"><i class="fa fa-check"></i><b>1</b> CHAPTER 1. The Tidy Text Format</a><ul>
<li class="chapter" data-level="1.1" data-path="contrasting-tidy-text-with-other-data-structures.html"><a href="contrasting-tidy-text-with-other-data-structures.html"><i class="fa fa-check"></i><b>1.1</b> Contrasting Tidy Text with Other Data Structures</a></li>
<li class="chapter" data-level="1.2" data-path="the-unnest_tokens-function.html"><a href="the-unnest_tokens-function.html"><i class="fa fa-check"></i><b>1.2</b> The unnest_tokens Function</a></li>
<li class="chapter" data-level="1.3" data-path="example-1-tidying-the-works-of-jane-austen.html"><a href="example-1-tidying-the-works-of-jane-austen.html"><i class="fa fa-check"></i><b>1.3</b> Example 1: Tidying the works of Jane Austen</a></li>
<li class="chapter" data-level="1.4" data-path="example-2-the-gutenbergr-package.html"><a href="example-2-the-gutenbergr-package.html"><i class="fa fa-check"></i><b>1.4</b> Example 2: The <code>gutenbergr</code> package</a></li>
<li class="chapter" data-level="1.5" data-path="a-flowchart-of-a-typical-text-analysis-using-tidy-data-priciples..html"><a href="a-flowchart-of-a-typical-text-analysis-using-tidy-data-priciples..html"><i class="fa fa-check"></i><b>1.5</b> A flowchart of a typical text analysis using tidy data priciples.</a></li>
<li class="chapter" data-level="1.6" data-path="meeting-videos.html"><a href="meeting-videos.html"><i class="fa fa-check"></i><b>1.6</b> Meeting Videos</a><ul>
<li class="chapter" data-level="1.6.1" data-path="meeting-videos.html"><a href="meeting-videos.html#cohort-1"><i class="fa fa-check"></i><b>1.6.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Text Mining with R Book Club</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="example-1-tidying-the-works-of-jane-austen" class="section level2">
<h2><span class="header-section-number">1.3</span> Example 1: Tidying the works of Jane Austen</h2>
<p><strong>Loading the texts and converting it into a tibble data format:</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-1"></a><span class="kw">library</span>(janeaustenr)</span>
<span id="cb11-2"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb11-3"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-3"></a><span class="kw">library</span>(stringr)</span>
<span id="cb11-4"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-4"></a></span>
<span id="cb11-5"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-5"></a>original_books &lt;-<span class="st"> </span><span class="kw">austen_books</span>() <span class="op">%&gt;%</span></span>
<span id="cb11-6"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-6"></a><span class="st">  </span><span class="kw">group_by</span>(book) <span class="op">%&gt;%</span></span>
<span id="cb11-7"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">linenumber =</span> <span class="kw">row_number</span>(),</span>
<span id="cb11-8"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-8"></a>         <span class="dt">chapter =</span> <span class="kw">cumsum</span>(<span class="kw">str_detect</span>(text, </span>
<span id="cb11-9"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-9"></a>                                     <span class="kw">regex</span>(<span class="st">&quot;^chapter [</span><span class="ch">\\</span><span class="st">divxlc]&quot;</span>,</span>
<span id="cb11-10"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-10"></a>                                           <span class="dt">ignore_case =</span> <span class="ot">TRUE</span>)))) <span class="op">%&gt;%</span></span>
<span id="cb11-11"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-11"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb11-12"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-12"></a></span>
<span id="cb11-13"><a href="example-1-tidying-the-works-of-jane-austen.html#cb11-13"></a>original_books</span></code></pre></div>
<pre><code>## # A tibble: 73,422 × 4
##    text                    book                linenumber chapter
##    &lt;chr&gt;                   &lt;fct&gt;                    &lt;int&gt;   &lt;int&gt;
##  1 &quot;SENSE AND SENSIBILITY&quot; Sense &amp; Sensibility          1       0
##  2 &quot;&quot;                      Sense &amp; Sensibility          2       0
##  3 &quot;by Jane Austen&quot;        Sense &amp; Sensibility          3       0
##  4 &quot;&quot;                      Sense &amp; Sensibility          4       0
##  5 &quot;(1811)&quot;                Sense &amp; Sensibility          5       0
##  6 &quot;&quot;                      Sense &amp; Sensibility          6       0
##  7 &quot;&quot;                      Sense &amp; Sensibility          7       0
##  8 &quot;&quot;                      Sense &amp; Sensibility          8       0
##  9 &quot;&quot;                      Sense &amp; Sensibility          9       0
## 10 &quot;CHAPTER 1&quot;             Sense &amp; Sensibility         10       1
## # … with 73,412 more rows</code></pre>
<p><strong>Restructuring the one-token-per-row tidytext data format:</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="example-1-tidying-the-works-of-jane-austen.html#cb13-1"></a><span class="kw">library</span>(tidytext)</span>
<span id="cb13-2"><a href="example-1-tidying-the-works-of-jane-austen.html#cb13-2"></a>tidy_books &lt;-<span class="st"> </span>original_books <span class="op">%&gt;%</span></span>
<span id="cb13-3"><a href="example-1-tidying-the-works-of-jane-austen.html#cb13-3"></a><span class="st">  </span><span class="kw">unnest_tokens</span>(word, text)</span>
<span id="cb13-4"><a href="example-1-tidying-the-works-of-jane-austen.html#cb13-4"></a></span>
<span id="cb13-5"><a href="example-1-tidying-the-works-of-jane-austen.html#cb13-5"></a>tidy_books</span></code></pre></div>
<pre><code>## # A tibble: 725,055 × 4
##    book                linenumber chapter word       
##    &lt;fct&gt;                    &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      
##  1 Sense &amp; Sensibility          1       0 sense      
##  2 Sense &amp; Sensibility          1       0 and        
##  3 Sense &amp; Sensibility          1       0 sensibility
##  4 Sense &amp; Sensibility          3       0 by         
##  5 Sense &amp; Sensibility          3       0 jane       
##  6 Sense &amp; Sensibility          3       0 austen     
##  7 Sense &amp; Sensibility          5       0 1811       
##  8 Sense &amp; Sensibility         10       1 chapter    
##  9 Sense &amp; Sensibility         10       1 1          
## 10 Sense &amp; Sensibility         13       1 the        
## # … with 725,045 more rows</code></pre>
<p><strong>Removing the stopwords:</strong>
Often in text analysis, we will want to remove stop words; stop words are words that are not useful for an analysis, typically extremely common words such as “the”, “of”, “to”, and so forth in English. We can remove stop words (kept in the tidytext dataset stop_words) with an <code>anti_join()</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="example-1-tidying-the-works-of-jane-austen.html#cb15-1"></a><span class="kw">data</span>(stop_words)</span>
<span id="cb15-2"><a href="example-1-tidying-the-works-of-jane-austen.html#cb15-2"></a></span>
<span id="cb15-3"><a href="example-1-tidying-the-works-of-jane-austen.html#cb15-3"></a>tidy_books &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></span>
<span id="cb15-4"><a href="example-1-tidying-the-works-of-jane-austen.html#cb15-4"></a><span class="st">  </span><span class="kw">anti_join</span>(stop_words)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<p>We can use them all together, as we have here, or <code>filter()</code> to only use one set of stop words if that is more appropriate for a certain analysis.</p>
<p><strong>Using the <code>dplyr::count()</code> to summarize the word frequency results as a tidy data table:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="example-1-tidying-the-works-of-jane-austen.html#cb17-1"></a>tidy_books <span class="op">%&gt;%</span></span>
<span id="cb17-2"><a href="example-1-tidying-the-works-of-jane-austen.html#cb17-2"></a><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) </span></code></pre></div>
<pre><code>## # A tibble: 13,914 × 2
##    word       n
##    &lt;chr&gt;  &lt;int&gt;
##  1 miss    1855
##  2 time    1337
##  3 fanny    862
##  4 dear     822
##  5 lady     817
##  6 sir      806
##  7 day      797
##  8 emma     787
##  9 sister   727
## 10 house    699
## # … with 13,904 more rows</code></pre>
<p><strong>Visualizing the word frequency results as a plot:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb19-2"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-2"></a></span>
<span id="cb19-3"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-3"></a>tidy_books <span class="op">%&gt;%</span></span>
<span id="cb19-4"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-4"></a><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-5"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-5"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">600</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-6"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">reorder</span>(word, n)) <span class="op">%&gt;%</span></span>
<span id="cb19-7"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-7"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(n, word)) <span class="op">+</span></span>
<span id="cb19-8"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-8"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb19-9"><a href="example-1-tidying-the-works-of-jane-austen.html#cb19-9"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<p><img src="bookclub-tidytext_files/figure-html/01-example1_ggplot-1.png" width="672" /></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-unnest_tokens-function.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="example-2-the-gutenbergr-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/r4ds/bookclub-tidytext/edit/main/01.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
